What: 전연령 소셜 그림 퀴즈 앱 \*\*“너랑 나의 그림퀴즈”\*\*의 **IA(Information Architecture)** 완성본
Why: 1주 MVP에서 **핵심 루프**를 가장 짧은 동선으로 달성하고, 접근성·안정성·보상 안전장치를 구조적으로 담기 위함
How-Now: **Top App Bar + Bottom Tabs(Home/Palette/Settings)**, Room 내부에 **Draw/Guess/Result 모달**, **딥링크/원격 플래그/SSV**를 전제로 한 네비·상태 설계

---

## 1) Site Map / Page Hierarchy / Navigation Structure

**Reasoning → Conclusion**: 전연령 타깃과 1주 일정에 맞춰 **탭 3개**(Home/Palette/Settings)로 상위 IA를 고정, \*\*핵심 루프 화면(Draw/Guess/Result)\*\*은 **Room 컨텍스트 안 모달/시트**로 처리하여 복잡도를 낮춘다.

### 1.1 상위 IA 트리

```
App Root
├─ Top App Bar (제목, 뒤로, 공유/도움말)
└─ Bottom Tabs
   ├─ Home (기본 진입)
   │   ├─ Room (상태: 대기/플레이/결과)
   │   │   ├─ [Modal] Draw
   │   │   ├─ [Modal] Guess
   │   │   └─ [Modal] Result
   │   └─ Onboarding (3카드 튜토리얼; 최초 1회)
   ├─ Palette (상점/해금)
   └─ Settings (접근성/알림/약관/신고)
```

### 1.2 네비게이션 규칙

* **Bottom Tabs**: 전역 이동(Home/Palette/Settings)
* **Room**: Home의 하위 컨텍스트. Draw/Guess/Result는 **모달**로 열림(뒤로 제스처/닫기 X로 Room 복귀)
* **Top App Bar**: 컨텍스트별 액션(예: Room에서 **공유** 버튼 활성)

**(가정/리스크/백로그)**

| 구분  | 내용                                 |
| --- | ---------------------------------- |
| 가정  | Room은 단일 스택(다중 Room 동시 진입 미지원)     |
| 리스크 | 모달 과용 시 포커스 관리/스크린리더 혼란            |
| 백로그 | Deep-link 전용 미니 “Join” 화면(웹 폴백 강조) |

---

## 2) User Flows (Onboarding, Home, Room, Draw, Guess, Result, Palette, Settings)

**Reasoning → Conclusion**: 모든 플로우를 **1화면 1과업**으로 단순화하고, **실패/이탈** 경로를 명시해 회복 가능하게 한다.

### 2.1 Onboarding

```
[앱 실행] → [Onboarding 3카드]
   ├─ (건너뛰기) → Home
   └─ (끝까지 보기) → 접근성 토글 안내 → Home
Fail: 앱 강제종료 → 재실행 시 Home
```

### 2.2 Home → Room

```
Home
 ├─ [빠른 시작] → Room(대기)
 ├─ [코드 입력] → 유효성 검사 → Room(대기)
 └─ [최근 입장] → Room(대기)
Fail: 코드 오류 → 에러 토스트, 재입력
```

### 2.3 Room 내부 루프

```
Room(대기)
 ├─ [공유] Kakao Talk Share(딥링크 포함)
 ├─ [라운드 시작] (권한자만; 선택) → Round 생성
 └─ [닫기] → Home

Room(플레이)
 ├─ Drawer: [Draw 모달] → 업로드 → Result
 └─ Guesser: [Guess 모달] → 정답 제출 → (정답) Result | (오답) 재도전
Fail: 업로드 실패 → 재시도/취소
```

### 2.4 Result → 다음 라운드

```
Result
 ├─ [다시하기] → Room(대기)
 └─ [나가기] → Home
```

### 2.5 Palette(상점)

```
Palette
 ├─ [팔레트 카드] → 가격/미리보기 → [해금] (잔액 체크)
 └─ 잔액 부족 → [광고 보고 +50] 안내 → Home로 복귀 유도
Fail: 결제/코인 차감 실패 → 에러 토스트
```

### 2.6 Settings

```
Settings
 ├─ 접근성(고대비/폰트확대/애니 줄이기)
 ├─ 알림/사운드
 ├─ 신고/차단
 └─ 약관/개인정보/오픈소스
```

**(가정/리스크/백로그)**

| 구분  | 내용                                 |
| --- | ---------------------------------- |
| 가정  | 공유는 **사용자 주도** 템플릿(자동 DM 아님)       |
| 리스크 | 딥링크 실패 시 사용자 혼선                    |
| 백로그 | Room 내 “진행 상황” 미니 인디케이터(접속/라운드 상태) |

---

## 3) Per-screen Widgets / States / Loading & Errors / Accessibility

**Reasoning → Conclusion**: 화면별 **필수 위젯**과 **상태·오류**를 표준화하면, 1주 MVP에서도 일관된 품질을 달성할 수 있다.

### 3.1 Home

| 영역  | 위젯/기능                 | 상태/로딩  | 에러/복구         | 접근성 포인트            |
| --- | --------------------- | ------ | ------------- | ------------------ |
| 헤더  | 제목, 도움말               | -      | -             | 큰 타이틀, 음성 안내 버튼 배치 |
| CTA | **빠른 시작** 버튼(Primary) | 진행 스피너 | 실패 시 토스트      | 버튼 ≥48dp           |
| 코드  | 코드 입력 필드 + 입장         | 유효성 로딩 | **유효성 실패** 라벨 | 입력 확대 지원           |
| 카드  | “광고 보고 +50”           | 로딩/쿨다운 | 광고 취소/실패 안내   | 텍스트+아이콘 병행         |

### 3.2 Room

| 영역 | 위젯/기능            | 상태/로딩       | 에러/복구       | 접근성         |
| -- | ---------------- | ----------- | ----------- | ----------- |
| 상단 | 방 코드, 공유 버튼      | 공유 진행 인디케이터 | 공유 실패 토스트   | 큰 코드, 복사 버튼 |
| 본문 | 상태 배지(대기/플레이/결과) | 실시간 업데이트    | 동기화 지연 배너   | 색+텍스트 동시 표기 |
| 액션 | 라운드 시작/나가기       | 진행 스피너      | 시작 실패 시 재시도 | 하단 고정 큰 버튼  |

### 3.3 Draw (모달)

| 위젯  | 상세            | 상태/로딩      | 에러/복구      | 접근성                 |
| --- | ------------- | ---------- | ---------- | ------------------- |
| 캔버스 | 펜/지우개/되돌리기/8색 | 저장 중 인디케이터 | 업로드 실패→재시도 | 터치 타깃 확대, 색약 안전 팔레트 |
| 업로드 | PNG 압축 업로드    | 업로드 프로그레스  | 실패 토스트     | “진행 중” 명확 표시        |

### 3.4 Guess (모달)

| 위젯   | 상세         | 상태/로딩      | 에러/복구       | 접근성             |
| ---- | ---------- | ---------- | ----------- | --------------- |
| 미리보기 | 최신 그림 이미지  | 로딩 스켈레톤    | 불러오기 실패→재시도 | 확대(핀치) 허용       |
| 입력   | 정답 입력 + 제출 | 검증 중 인디케이터 | 네트워크 실패→재시도 | 큰 입력 박스, 소리 피드백 |

### 3.5 Result (모달)

| 위젯 | 상세       | 상태/로딩  | 에러/복구        | 접근성            |
| -- | -------- | ------ | ------------ | -------------- |
| 결과 | 정답/시간/보상 | -      | -            | 아이콘+텍스트, 대비 강화 |
| 액션 | 다시하기/나가기 | 진행 스피너 | 실패 시 Room 복귀 | 큰 버튼, 진동 피드백   |

### 3.6 Palette

| 위젯  | 상세                 | 상태/로딩    | 에러/복구       | 접근성        |
| --- | ------------------ | -------- | ----------- | ---------- |
| 그리드 | 팔레트 카드(미리보기/가격/잠금) | 카드 스켈레톤  | 가격/잔액 체크 실패 | 타일 간격 넓힘   |
| 해금  | 해금 다이얼로그           | 진행 인디케이터 | 차감 실패→롤백    | 색 이름+패턴 병행 |

### 3.7 Settings

| 위젯  | 상세            | 상태/로딩    | 에러/복구      | 접근성       |
| --- | ------------- | -------- | ---------- | --------- |
| 접근성 | 고대비/폰트/애니 줄이기 | 즉시 반영    | 실패 시 기본 복귀 | 미리보기 영역   |
| 신고  | 신고 버튼 → 다이얼로그 | 제출 인디케이터 | 실패 토스트     | 음성 안내 텍스트 |

**(가정/리스크/백로그)**

| 구분  | 내용                            |
| --- | ----------------------------- |
| 가정  | 업로드는 0.2–1.0MB 압축 정책(서버 ≤5MB) |
| 리스크 | 저사양 기기 캔버스 프레임 드랍             |
| 백로그 | UI 애니메이션 감소 모드(시각 피로 저감)      |

---

## 4) URL / Deep Link 구조 & 링크 전략

**Reasoning → Conclusion**: 딥링크는 **Room/Round 식별자** 중심으로 설계한다. 링크 실패 대비 **웹 폴백**을 제공해 설치 전환을 돕는다.

### 4.1 딥링크 스키마

| 목적     | 앱 링크                                        | 파라미터                       | 예시                                       |
| ------ | ------------------------------------------- | -------------------------- | ---------------------------------------- |
| 방 입장   | `app://room/{room_id}`                      | `room_id`                  | `app://room/8a1b...`                     |
| 라운드 초대 | `app://round/{round_id}?invite={invite_id}` | `round_id`, `invite`       | `app://round/ab12?invite=xyz`            |
| 웹 폴백   | `https://quizdraw.app/join?r=...&i=...`     | `r`=room/round, `i`=invite | `https://quizdraw.app/join?r=ab12&i=xyz` |

### 4.2 내부/외부 링크 처리

* **외부(Kakao Talk Share)**: 웹 폴백 우선 노출 → 앱 설치 시 **해당 딥링크로 복귀**
* **내부**: Home↔Room 이동은 파라미터 보존(뒤로 가기 시 state 유지)

**(가정/리스크/백로그)**

| 구분  | 내용                              |
| --- | ------------------------------- |
| 가정  | 설치 직후 첫 실행에 딥링크 파라미터 전달 보장      |
| 리스크 | 일부 OEM·브라우저에서 링크 호환성 이슈         |
| 백로그 | Deferred Deep Link(설치→복귀) 계측 강화 |

---

## 5) Component Hierarchy (핵심 화면)

**Reasoning → Conclusion**: 재사용 가능한 **원자/분자/유기체** 컴포넌트로 쪼개 1주 내 구현·유지보수를 용이하게 한다.

### 5.1 공통

* **Atoms**: Icon, Label, Button(Primary/Secondary), Chip(Color), Divider, Spinner, Toast
* **Molecules**: AppBar(Title+Back+Action), CodeInput, PaletteCard, TutorialCard, ErrorBanner
* **Organisms**:

  * **CanvasBoard**(툴바+레이어+압축기)
  * **ShareSheet**(썸네일/문구/딥링크) **검증 필요: Kakao 템플릿 최신 규격**
  * **ResultPanel**(정답/시간/코인)

### 5.2 화면별 조합(예)

* **Home** = AppBar + CTAButton + CodeInput + RewardCTA
* **Room** = AppBar(공유) + StatusBanner + ActionBar(시작/나가기)
* **Draw(모달)** = CanvasBoard + UploadButton
* **Guess(모달)** = ImagePreview + AnswerField + SubmitButton
* **Result(모달)** = ResultPanel + Retry/Exit
* **Palette** = Grid(PaletteCard×N) + BalanceBar
* **Settings** = A11yToggles + LegalList + ReportButton

**(가정/리스크/백로그)**

| 구분  | 내용                           |
| --- | ---------------------------- |
| 가정  | 캔버스·공유·결과 패널은 독립 위젯화         |
| 리스크 | 공유 템플릿/파라미터 스키마 변경           |
| 백로그 | CanvasBoard 벡터 스트로크 저장(리플레이) |

---

## 6) Tracking Points: 이벤트 & 파라미터

**Reasoning → Conclusion**: KPI 연결을 고려해 **최소 이벤트 집합**에 **일관 파라미터**를 부여한다.

| 이벤트               | 트리거          | 주요 파라미터(예시)                        | 목적       |
| ----------------- | ------------ | ---------------------------------- | -------- |
| `app_open`        | 앱 포그라운드      | `source`(normal/deeplink)          | D1, DAU  |
| `share_click`     | 공유 버튼 탭      | `room_id`,`round_id`,`template`    | 초대 퍼널    |
| `deeplink_open`   | 딥링크 진입       | `r`,`i`,`platform`                 | 초대→입장 전환 |
| `room_create`     | 방 생성         | `room_id`                          | 생성량      |
| `round_start`     | 라운드 시작       | `round_id`,`drawer`                | 루프 시작    |
| `drawing_upload`  | 업로드 성공       | `round_id`,`size_kb`,`dur_ms`      | 성능       |
| `guess_submit`    | 정답 제출        | `round_id`,`len`,`normalized`      | 입력 분석    |
| `guess_correct`   | 판정=정답        | `round_id`,`first_winner`=true     | 승자 판정    |
| `reward_send`     | +10(SEND)    | `round_id`,`idem_key`              | 보상 무결성   |
| `reward_receive`  | +10(RECEIVE) | `round_id`,`idem_key`              | 보상 무결성   |
| `ad_complete_ssv` | SSV 성공       | `ad_network`,`key_id`,`latency_ms` | SSV 품질   |
| `palette_unlock`  | 해금 완료        | `palette_id`,`cost`                | 경제 전환    |
| `a11y_toggle`     | 접근성 변경       | `type`(contrast/font/anim)         | 접근성 사용성  |
| `att_prompt`      | iOS ATT 표시   | `status`(allow/deny)               | 프라이버시    |

**(가정/리스크/백로그)**

| 구분  | 내용                       |
| --- | ------------------------ |
| 가정  | `idem_key`로 보상 중복 방지 트래킹 |
| 리스크 | 과다 파라미터로 페이로드 증가         |
| 백로그 | 퍼널 단계별 사용자 세그먼트 도입       |

---

## 7) Mobile vs Tablet Distinctions

**Reasoning → Conclusion**: MVP는 **모바일 우선**이지만, 태블릿에서 **가로 확장**만으로도 체감 품질이 상승한다.

| 항목      | Mobile(세로)    | Tablet(세로/가로)         |
| ------- | ------------- | --------------------- |
| 레이아웃    | 1열            | 2열(그리드/리스트 병행)        |
| Room    | 상태 배지 + 큰 CTA | 상태 영역 좌측 고정, 액션 패널 우측 |
| Draw 모달 | 전체 화면         | 70% 시트 + 우측 미리보기      |
| Palette | 2–3열 그리드      | 4–6열 그리드(카드 확대)       |
| 터치 타깃   | ≥48dp         | ≥56dp(여유)             |
| 폰트      | 16–18sp       | 18–20sp(가독 강화)        |

**(가정/리스크/백로그)**

| 구분  | 내용                          |
| --- | --------------------------- |
| 가정  | 데스크톱 웹은 MVP 비범위             |
| 리스크 | 태블릿 가로에서 포커스/모달 계층 복잡화      |
| 백로그 | 태블릿 전용 2-패널(Room+Draw 동시 뷰) |

---

## 8) 디자인 샘플 이미지 제안

**Reasoning → Conclusion**: 고대비·굵은 외곽선·부드러운 파스텔을 혼합해 **전연령 가독성**과 **친근함**을 동시에 달성한다.

* **튜토리얼 카드 3종**: (1) 연필로 스케치 시작, (2) 카카오 말풍선으로 공유, (3) 체크마크로 정답 성공
* **팔레트 카드**: 색 칩 6–8개가 살짝 떠 있는 **네오모픽** 카드(라벨/가격/잠금 아이콘)
* **결과 화면**: 귀여운 동물 마스코트가 **정답 플래카드**를 드는 일러스트(고대비 배경)
* **공유 썸네일**: 스케치북+연필 아이콘, **앱 로고**와 방 코드 강조(텍스트 대비 7:1 권장)

**(가정/리스크/백로그)**

| 구분  | 내용                       |
| --- | ------------------------ |
| 가정  | 이미지 에셋은 자체 제작/CC0 기반 리워크 |
| 리스크 | 과도한 장식으로 가독 저하           |
| 백로그 | 다크/고대비 전용 일러스트 세트        |

---

## 9) 접근성(A11y) 원칙 요약

**Reasoning → Conclusion**: **큰 버튼·명확 대비·간단 동선**이 전연령 사용성의 핵심이다.

* 터치 타깃 ≥48dp(태블릿 ≥56dp), 본문 16–18sp(태블릿 18–20sp)
* **고대비 테마** 토글, 색약 안전 팔레트 1종 기본 제공
* **1화면 1과업**, 스크린리더 라벨·포커스 순서 검사
* 애니메이션 최소화 옵션(움직임 민감 유저 고려)

**(가정/리스크/백로그)**

| 구분  | 내용                           |
| --- | ---------------------------- |
| 가정  | 스크린리더 기본 시나리오(튜토리얼/버튼/입력) 지원 |
| 리스크 | 모달 중첩 시 포커스 트랩 이슈            |
| 백로그 | 음성 가이드(튜토리얼/오류) 추가           |

---

## 10) 인증/정책 주의(IA 관점)

**Reasoning → Conclusion**: MVP는 **게스트 기본**으로 갈등을 줄이고, 소셜 로그인은 후기 도입한다.

* **Auth**: 게스트(익명) → 추후 소셜(Kakao 등) **검증 필요**
* **공유 정책**: **사용자 주도** 공유(디폴트 템플릿), 자동 DM 금지
* **광고 보상**: **서버사이드 검증(SSV)** 이후만 적립
* **스토어 표기**: “어린이 전용” 표방은 지양, 접근성 강화로 충분히 커버

**(가정/리스크/백로그)**

| 구분  | 내용                            |
| --- | ----------------------------- |
| 가정  | 게스트 상태에서도 코인/해금 유지(로컬+클라우드 키) |
| 리스크 | 소셜 전환 시 데이터 머지 이슈             |
| 백로그 | 계정 이관(게스트→소셜) 마법사             |

---

### 끝.

🔄 **Self-Reflection**: IA는 **탭 3개 + Room 모달 구조**로 최소화했고, 실패/이탈 경로·접근성·딥링크·트래킹을 일관되게 배치했다. **검증 필요** 항목(카카오 템플릿 세부, 소셜 auth 정책, 일부 플랫폼 동작)은 런칭 직전 재확인이 필요하다.
